{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,yCCGA,MAAMC,EAAYC,SAASC,cAAc,iBAGnCC,EAAkB,oDAClBC,EAAiB,mCACjBC,EAAgBJ,SAASC,cAAc,eAEhCI,EAAgBC,IAC3B,IACE,MAAMC,GAAO,EAAAC,EAAAC,gBAAe,GACR,IAAhBF,EAAKG,QACPX,EAAUY,UAAY,oCAAoCR,yBAC1DC,EAAcO,UAAY,KAE1BC,EAAoBL,GACpBM,IAEJ,CAAE,MAAOC,GACPC,QAAQC,IAAIF,EACd,GAGWG,EAAeX,IAC1B,IACE,MAAMC,GAAO,EAAAC,EAAAU,eAAc,GACP,IAAhBX,EAAKG,QACPX,EAAUY,UAAY,oCAAoCR,yBAC1DC,EAAcO,UAAY,KAE1BC,EAAoBL,GACpBY,IAEJ,CAAE,MAAOL,GACPC,QAAQC,IAAIF,EACd,GAGWF,EAAsBQ,MAAMC,IACvC,IAAIC,EAAa,GACjB,MAAMC,QAAeC,EAAAC,QAAWC,mBAC1BC,EAASN,EACZO,KACC,EAACC,MAAEA,EAAKC,YAAEA,EAAWC,aAAEA,EAAYC,eAAEA,EAAcC,KAAEA,EAAIC,aAAEA,EAAYC,UAAEA,EAASC,GAAEA,MAC9ED,IACFb,EAAaC,EACVc,QAAO,EAACD,GAAEA,KAASD,EAAUG,SAASF,KACtCR,KAAI,EAACK,KAAEA,KAAWA,IAClBM,KAAK,OAEH,2CACyBH,mEAE1BN,EAnDE,kCAmDsBA,EAAc5B,uBACtC4B,EAnDS,sCAmDsBA,EAAc5B,2BACxC2B,GAASI,oGAESJ,GAASI,yFAEPX,oDACES,GAAgBC,IAAiBQ,MAAM,EAAG,IAAM,uDAC/CN,EAAaO,QAAQ,IAAM,qEAMhEF,KAAK,IACRxC,EAAUY,UAAY,GACtBZ,EAAU2C,mBAAmB,YAAaf,EAAA,EDlEtCgB,EAAgB3C,SAASC,cAAc,eAEhCY,EAAuB,KACnC,KACc,EAAAL,EAAAC,gBAAe,GAA5B,MAEMmC,EAAU,CACfC,WAFkBC,KAAKC,MAAMC,aAAaC,QAAQ,YAAYvC,OAG9DwC,aAAc,GACdC,aAAc,EACdC,KAAM,EACNC,aAAa,GAEK,IAAIC,EAAAzD,GAAJ,CAAe8C,EAAeC,GAEtCW,GAAG,cAAejD,IAC5B,MAAMkD,GAAc,EAAAhD,EAAAC,gBAAeH,EAAM8C,MACzCxC,EAAoB4C,EAAA,GAEtB,CAAE,MAAO1C,GACRC,QAAQC,IAAIF,EACb,GAGYK,EAAsB,KAClC,KACc,EAAAX,EAAAU,eAAc,GAA3B,MAEM0B,EAAU,CACfC,WAFkBC,KAAKC,MAAMC,aAAaC,QAAQ,UAAUvC,OAG5DwC,aAAc,GACdC,aAAc,EACdC,KAAM,EACNC,aAAa,GAEK,IAAIC,EAAAzD,GAAJ,CAAe8C,EAAeC,GAEtCW,GAAG,cAAejD,IAC5B,MAAMkD,GAAc,EAAAhD,EAAAU,eAAcZ,EAAM8C,MACxCxC,EAAoB4C,EAAA,GAEtB,CAAE,MAAO1C,GACRC,QAAQC,IAAIF,EACb,GExCK2C,GAFazD,SAASC,cAAc,gBAEvBD,SAASC,cAAc,gBACpCyD,EAAW1D,SAASC,cAAc,aAElC0D,EAAmBC,IACxB,MAAMC,EAAaD,EAAEE,OAEhBD,EAAWE,UAAUC,SAAS,wBAClCP,EAAWM,UAAUE,OAAO,sBAC5BP,EAASK,UAAUE,OAAO,uBAGvBJ,EAAWE,UAAUC,SAAS,0BACjCP,EAAWM,UAAUE,OAAO,wBAC5BP,EAASK,UAAUE,OAAO,yBAEvBR,EAAWM,UAAUC,SAAS,sBACjC3D,IAEAY,GAAW,EAIbwC,EAAWS,iBAAiB,QAASP,GACrCD,EAASQ,iBAAiB,QAASP,GAEnCtD,I","sources":["src/js/pagination-library.js","src/js/render-library-movies.js","src/js/header-library.js"],"sourcesContent":["import Pagination from \"tui-pagination\";\nimport \"tui-pagination/dist/tui-pagination.css\";\nimport { getFromQueued, getFromWatched } from \"./local-storage\";\nimport { renderLibraryMovies } from \"./render-library-movies\";\n\nconst paginationDOM = document.querySelector(\"#pagination\");\n\nexport const setPaginationWatched = () => {\n\ttry {\n\t\tconst data = getFromWatched(1);\n\t\tconst totalItems = JSON.parse(localStorage.getItem(\"watched\")).length;\n\t\tconst options = {\n\t\t\ttotalItems: totalItems,\n\t\t\titemsPerPage: 15,\n\t\t\tvisiblePages: 5,\n\t\t\tpage: 1,\n\t\t\tcenterAlign: true,\n\t\t};\n\t\tconst pagination = new Pagination(paginationDOM, options);\n\n\t\tpagination.on(\"beforeMove\", (event) => {\n\t\t\tconst newPageData = getFromWatched(event.page);\n\t\t\trenderLibraryMovies(newPageData);\n\t\t});\n\t} catch (error) {\n\t\tconsole.log(error);\n\t}\n};\n\nexport const setPaginationQueued = () => {\n\ttry {\n\t\tconst data = getFromQueued(1);\n\t\tconst totalItems = JSON.parse(localStorage.getItem(\"queue\")).length;\n\t\tconst options = {\n\t\t\ttotalItems: totalItems,\n\t\t\titemsPerPage: 15,\n\t\t\tvisiblePages: 5,\n\t\t\tpage: 1,\n\t\t\tcenterAlign: true,\n\t\t};\n\t\tconst pagination = new Pagination(paginationDOM, options);\n\n\t\tpagination.on(\"beforeMove\", (event) => {\n\t\t\tconst newPageData = getFromQueued(event.page);\n\t\t\trenderLibraryMovies(newPageData);\n\t\t});\n\t} catch (error) {\n\t\tconsole.log(error);\n\t}\n};\n","import { setPaginationWatched, setPaginationQueued } from './pagination-library';\nimport { getFromQueued, getFromWatched } from './local-storage';\nimport getGallery from './get-gallery';\nconst moviesDOM = document.querySelector('.movies__list');\nconst IMG_URL = 'https://image.tmdb.org/t/p/w500';\nconst IMG_URL_RETINA = 'https://image.tmdb.org/t/p/original';\nconst IMG_URL_DEFAULT = 'https://i.ibb.co/xq4LQMw/Filmoteka-by-Quattro.jpg';\nconst NO_MOVIES_MEME = 'https://i.imgflip.com/7kk9al.jpg';\nconst paginationDOM = document.querySelector('#pagination');\n\nexport const submitWatched = event => {\n  try {\n    const data = getFromWatched(1);\n    if (data.length === 0) {\n      moviesDOM.innerHTML = `<img class='movie__library' src='${NO_MOVIES_MEME}' alt='Boromir meme'>`;\n      paginationDOM.innerHTML = '';\n    } else {\n      renderLibraryMovies(data);\n      setPaginationWatched();\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const submitQueued = event => {\n  try {\n    const data = getFromQueued(1);\n    if (data.length === 0) {\n      moviesDOM.innerHTML = `<img class='movie__library' src='${NO_MOVIES_MEME}' alt='Boromir meme'>`;\n      paginationDOM.innerHTML = '';\n    } else {\n      renderLibraryMovies(data);\n      setPaginationQueued();\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const renderLibraryMovies = async movies => {\n  let genreNames = [];\n  const genres = await getGallery.getGalleryGenres();\n  const markup = movies\n    .map(\n      ({ title, poster_path, release_date, first_air_date, name, vote_average, genre_ids, id }) => {\n        if (genre_ids) {\n          genreNames = genres\n            .filter(({ id }) => genre_ids.includes(id))\n            .map(({ name }) => name)\n            .join(', ');\n        }\n        return `\n            <li class=\"movie\" data-id=${id}>\n            <img class=\"movie__image\" srcset=\"\n            ${poster_path ? IMG_URL + poster_path : IMG_URL_DEFAULT} 1x, \n            ${poster_path ? IMG_URL_RETINA + poster_path : IMG_URL_DEFAULT} 2x\"\n            alt=\"${title || name}\" loading=\"lazy\">\n            <div class=\"movie__textbox\">\n          <h3 class=\"movie__title\">${title || name}</h3>\n          <div class=\"movie__subtitle\">\n          <span class=\"movie__genre\">${genreNames}</span>\n          <span class=\"movie__date\">| ${(release_date || first_air_date)?.slice(0, 4) || '-'}</span>\n          <span class=\"movie__rating\">| ${vote_average.toFixed(1) || '-'}</span>\n          </div>\n        </div>\n            </li>`;\n      },\n    )\n    .join('');\n  moviesDOM.innerHTML = '';\n  moviesDOM.insertAdjacentHTML('beforeend', markup);\n};\n","import {\n\tsetPaginationQueued,\n\tsetPaginationWatched,\n} from \"./pagination-library\";\nimport { submitQueued, submitWatched } from \"./render-library-movies\";\n\nconst btnLibrary = document.querySelector(\".btn-library\");\n\nconst btnWatched = document.querySelector(\"#btnWatched\");\nconst btnQueue = document.querySelector(\"#btnQueue\");\n\nconst toggleBtnActive = (e) => {\n\tconst clickedBtn = e.target;\n\n\tif (!clickedBtn.classList.contains(\"btn-current-active\")) {\n\t\tbtnWatched.classList.toggle(\"btn-current-active\");\n\t\tbtnQueue.classList.toggle(\"btn-current-active\");\n\t}\n\n\tif (clickedBtn.classList.contains(\"btn-current-inactive\")) {\n\t\tbtnWatched.classList.toggle(\"btn-current-inactive\");\n\t\tbtnQueue.classList.toggle(\"btn-current-inactive\");\n\t}\n\tif (btnWatched.classList.contains(\"btn-current-active\")) {\n\t\tsubmitWatched();\n\t} else {\n\t\tsubmitQueued();\n\t}\n};\n\nbtnWatched.addEventListener(\"click\", toggleBtnActive);\nbtnQueue.addEventListener(\"click\", toggleBtnActive);\n\nsubmitWatched();\n"],"names":["$afPuq","parcelRequire","$c06512b8cd2c6783$var$moviesDOM","document","querySelector","$c06512b8cd2c6783$var$IMG_URL_DEFAULT","$c06512b8cd2c6783$var$NO_MOVIES_MEME","$c06512b8cd2c6783$var$paginationDOM","$c06512b8cd2c6783$export$eee814f5567c49ef","event","data","$b374K","getFromWatched","length","innerHTML","$c06512b8cd2c6783$export$50fa949290769984","$94cfa6f5b2f224f0$export$363377568f09298","error","console","log","$c06512b8cd2c6783$export$eedb9d5eaed47172","getFromQueued","$94cfa6f5b2f224f0$export$b2975a7ef33e9e5e","async","movies","genreNames","genres","$5touj","default","getGalleryGenres","markup","map","title","poster_path","release_date","first_air_date","name","vote_average","genre_ids","id","filter","includes","join","slice","toFixed","insertAdjacentHTML","$94cfa6f5b2f224f0$var$paginationDOM","options","totalItems","JSON","parse","localStorage","getItem","itemsPerPage","visiblePages","page","centerAlign","$parcel$interopDefault","on","newPageData","$1b33aa1566a4faf2$var$btnWatched","$1b33aa1566a4faf2$var$btnQueue","$1b33aa1566a4faf2$var$toggleBtnActive","e","clickedBtn","target","classList","contains","toggle","addEventListener"],"version":3,"file":"my-library.cc5214e6.js.map"}